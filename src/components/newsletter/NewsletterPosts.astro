---
import { getCollection } from "astro:content";

import Posts from "@/components/common/Posts.astro";

// Get all newsletters and sort by date
const allNewsletters = (await getCollection("newsletters")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

// Limit to latest 5 newsletters for the homepage
const latestNewsletters = allNewsletters.slice(0, 5);
---

<Posts
  basePath="/newsletter"
  emptyMessage="No newsletters yet. Check back soon!"
  entries={latestNewsletters}
  limit={5}
/>
