---
const { book } = Astro.props;

// Handle both book.data and book formats
const bookData = "data" in book ? book.data : book;
---

<div class="group relative flex flex-col items-center text-center">
  <div class="w-20 sm:w-28 md:w-32 lg:w-36">
    <div
      class="overflow-hidden transition-transform duration-300 hover:scale-105"
    >
      <img
        alt={bookData.cover_image.cover_image_alt}
        class="mb-4 h-auto w-full object-cover"
        src={bookData.cover_image.cover_image_url}
        loading="lazy"
        decoding="async"
      />
    </div>
  </div>
  <h2 class="line-clamp-2 text-sm font-semibold">{bookData.title}</h2>
  <p class="text-sm font-light opacity-80">by {bookData.author}</p>
  <div
    class="absolute top-full left-1/2 z-10 mt-2 w-48 max-w-[calc(100vw-2rem)] -translate-x-1/2 rounded-lg bg-black/80 p-2 text-sm text-white opacity-0 transition-opacity duration-300 group-hover:opacity-100 sm:w-64"
  >
    {bookData.title}
  </div>
</div>
