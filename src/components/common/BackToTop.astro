<a
  href="#top"
  aria-label="Back to top"
  class="fixed right-5 bottom-16 z-50 hidden cursor-pointer rounded-full border border-gray-200 bg-white stroke-current p-2 shadow-xs transition-colors duration-800 ease-in-out hover:bg-gray-100 hover:stroke-gray-600 md:right-10 dark:border-white/25 dark:bg-gray-800 dark:stroke-white dark:hover:bg-gray-700 dark:hover:stroke-gray-200 [&:hover]:opacity-100 [&:not(:hover)]:opacity-0"
  id="back-to-top"
>
  <svg
    class="h-5 w-5"
    fill="none"
    height="24"
    stroke="currentColor"
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="2"
    viewBox="0 0 24 24"
    width="24"
    xmlns="http://www.w3.org/2000/svg"
  >
    <line x1="12" x2="12" y1="19" y2="5"></line>
    <polyline points="5 12 12 5 19 12"></polyline>
  </svg>
</a>

<style>
  /* Show back to top button when scrolled down */
  @media (min-height: 100vh) {
    #back-to-top {
      display: block;
    }
  }

  /* Hide back to top button when at the top */
  html:not([data-scrolled]) #back-to-top {
    opacity: 0;
    pointer-events: none;
  }

  /* Smooth scrolling for the entire page */
  html {
    scroll-behavior: smooth;
  }

  /* Add a target at the top of the page */
  body::before {
    content: "";
    display: block;
    height: 0;
    width: 0;
    position: absolute;
    top: 0;
    left: 0;
  }

  /* Show back to top button when scrolled */
  @media (min-height: 100vh) {
    html[data-scrolled="true"] #back-to-top {
      opacity: 1;
      pointer-events: auto;
    }
  }
</style>

<script>
  // Minimal JavaScript to add scroll detection
  document.addEventListener("astro:page-load", () => {
    const html = document.documentElement;

    function updateScrollState() {
      if (window.scrollY > 50) {
        html.setAttribute("data-scrolled", "true");
      } else {
        html.removeAttribute("data-scrolled");
      }
    }

    window.addEventListener("scroll", updateScrollState);
    updateScrollState(); // Initial check
  });
</script>
